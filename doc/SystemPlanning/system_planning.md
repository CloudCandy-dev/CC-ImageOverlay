# CC-ImageOverlay システム企画書

## 1. プロジェクト概要

### 1.1 プロジェクト名
CC-ImageOverlay

### 1.## 6. 設計方針

### 6.1 オブジェクト指向設計の原則（SOLID原則）
- 単一責任の原則（Single Responsibility Principle）
  - 各クラスは明確な単一の責務を持つ
  - UI、ビジネスロジック、データ管理の明確な分離
  - 変更理由が1つになるように責務を分割

- 開放閉鎖の原則（Open-Closed Principle）
  - 拡張に対して開き、修正に対して閉じた設計
  - プラグイン的な機能追加が可能な構造
  - 新機能追加時に既存コードの変更を最小限に

- インターフェース分離の原則（Interface Segregation Principle）
  - 機能ごとに適切に分割されたインターフェース
  - クライアントに必要なメソッドのみを提供
  - 疎結合な設計による柔軟性の確保

- リスコフの置換原則（Liskov Substitution Principle）
  - 派生クラスは基底クラスと置換可能
  - 継承関係の適切な設計
  - インターフェースの契約に基づく実装

- 依存関係逆転の原則（Dependency Inversion Principle）
  - 上位モジュールは下位モジュールに依存しない
  - 両者は抽象に依存する
  - 依存性注入を活用した柔軟な構造

### 6.2 モジュール構成
- UIモジュール：ユーザーインターフェース関連
  - プレゼンテーション層の実装
  - イベントハンドリング
  - ビューモデルの管理

- Coreモジュール：基本機能と設定管理
  - アプリケーションのコアロジック
  - 設定管理システム
  - プラグイン管理システム

- Overlayモジュール：オーバーレイウィンドウ管理
  - 画像オーバーレイの実装
  - メモオーバーレイの実装
  - 共通オーバーレイ機能

- Featureモジュール：機能実装
  - 画像操作機能
    - 2D回転変換処理
    - アフィン変換行列管理
    - 画像変換パイプライン
  - ショートカットキー管理
    - グローバルホットキー処理
    - キーイベントハンドリング
    - ショートカット設定管理
  - 言語・テーマ管理

- Utilityモジュール：共通ユーティリティ
  - ヘルパー関数
  - 共通インターフェース
  - 型定義

## 7. リスク管理オーバーレイ表示できるツールを提供し、ユーザーの作業効率を向上させる。主にゲームプレイ中の情報表示や、イラスト制作時のトレース補助として利用可能。

### 1.3 背景
- ゲームプレイ中に攻略情報や参考画像を確認する際の画面切り替えの手間を削減したい
- プレイ中のメモを取る際に、画面を邪魔せず効率的に情報を表示したい
- イラスト制作時のトレース用途でも使える汎用的なツールが必要
- マルチモニター環境での柔軟な情報表示の需要がある

## 2. 提供価値

### 2.1 ユーザーメリット
- ゲームプレイの中断を最小限に抑えた情報確認が可能
- 必要な情報を必要な場所に、必要な大きさで表示可能
- マルチ言語対応により、グローバルなユーザーが利用可能
- 視認性を確保しつつ、ゲーム画面への干渉を最小限に抑制

### 2.2 特徴
- 直感的なUI/UXデザイン
- 柔軟なカスタマイズ性
- 軽量な動作と低リソース消費
- モダンなデザインと使いやすさの両立

## 3. 主要機能

### 3.1 画像オーバーレイ機能
- 画像ファイルの選択と表示
- サイズと透明度の調整
- 表示位置の自由な設定
- 画像の2D回転機能（0-360度）
  - スライダーによる回転角度調整
  - 数値入力による正確な角度指定
  - 中心点を基準とした回転
- マルチモニター対応

### 3.2 メモオーバーレイ機能
- テキストメモの入力と表示
- フォントサイズの調整
- 背景色・テキスト色のカスタマイズ
- 透明度の調整

### 3.3 カスタマイズ機能
- 多言語対応（日本語・英語・中国語・韓国語）
- テーマ切り替え（ライト・ダーク・システム連動）
- 設定の永続化（ウィンドウ位置、サイズ等）

### 3.4 プレビュー・操作機能
- 視覚的な位置・サイズプレビュー
- ドラッグ＆ドロップによる直感的な調整
- リアルタイムプレビュー

### 3.5 ショートカット機能
- グローバルホットキーによるオーバーレイの表示/非表示切り替え
- バックグラウンドでの動作保証
- 他アプリケーションの操作を妨げない設計

## 4. 技術要件

### 4.1 開発環境
- 言語: Python
- GUI: Qt (PySide6)
- 設定保存: JSON形式

### 4.2 動作環境
- OS: Windows
- 画面解像度: HD以上
- マルチモニター環境対応

### 4.3 性能要件
- 起動時間: 3秒以内
- メモリ使用量: 100MB以下
- CPU使用率: 通常時5%以下

## 5. 品質要件

### 5.1 信頼性
- クラッシュ時の設定保持
- エラー発生時の適切なフィードバック
- 予期せぬ終了時のリカバリー機能

### 5.2 使用性
- 直感的な操作性
- 統一されたデザイン
- 視認性の高いUI
- キーボードショートカットのサポート

### 5.3 保守性
- モジュール化された設計
- 拡張性を考慮した構造
- 適切なドキュメント化

## 6. プロジェクトスケジュール

### 6.1 開発フェーズ
1. 要件定義 (1週間)
2. 基本設計 (1週間)
3. 詳細設計 (2週間)
4. 実装 (3週間)
5. テスト (1週間)
6. リリース準備 (1週間)

### 6.2 マイルストーン
- 要件定義完了
- 基本設計承認
- 詳細設計完了
- α版リリース
- β版リリース
- 正式リリース

## 7. リスク管理

### 7.1 技術的リスク
- Qtバージョンアップによる互換性問題
- マルチモニター環境での予期せぬ動作
- システムテーマ変更時の表示不具合

### 7.2 対策
- バージョン固定とテスト環境の整備
- 多様な環境でのテスト実施
- エラーハンドリングの強化

## 8. 設計目標

### 8.1 保守性
- 明確な責務分離による変更の局所化
- 統一された命名規則とコーディング規約
- 適切なドキュメント化とコメント

### 8.2 拡張性
- 新機能追加時の既存コード変更の最小化
- プラグイン的な機能追加の実現
- テーマや言語の容易な追加
- ショートカットキー機能の柔軟な拡張性
- 将来的な機能拡張のための抽象化設計

### 8.3 性能
- 起動時間: 3秒以内
- メモリ使用量: 100MB以下
- スムーズな画面更新（60fps）
