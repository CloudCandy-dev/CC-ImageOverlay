# CC-ImageOverlay 要件定義書

## 1. ユースケース定義

### 1.1 主要ユースケース

#### 1.1.1 ゲームプレイ中の情報表示
- アクター：ゲームプレイヤー
- 概要：ゲームプレイ中に攻略情報や参考画像をオーバーレイ表示
- 前提条件：
  - アプリケーションが起動している
  - 表示したい画像またはメモが用意されている
- 基本フロー：
  1. ユーザーが表示したい画像を選択またはメモを入力
  2. 表示位置、サイズ、透明度を調整
  3. オーバーレイを有効化
  4. ゲームプレイ中に必要な情報を確認
  5. 必要に応じてショートカットキーで表示/非表示を切り替え

#### 1.1.2 イラストトレース補助
- アクター：イラストレーター
- 概要：参考画像をオーバーレイ表示してトレース作業を補助
- 前提条件：
  - アプリケーションが起動している
  - トレース対象の画像が用意されている
- 基本フロー：
  1. ユーザーが参考画像を選択
  2. 表示位置、サイズ、回転角度、透明度を調整
  3. オーバーレイを有効化
  4. トレース作業を実施
  5. 必要に応じて画像の表示/非表示を切り替え

### 1.2 サブユースケース

#### 1.2.1 設定管理
- 言語設定の変更
- テーマの変更
- ウィンドウ位置の保存
- 最後に使用した画像パスの保存

#### 1.2.2 マルチモニター管理
- 表示モニターの選択
- モニターごとの位置記憶

## 2. 画面構成

### 2.1 メインウィンドウ
- メニューバー
  - ファイルメニュー
    - 終了
  - 設定メニュー
    - 言語選択
    - テーマ選択
  - 情報メニュー
    - ヘルプ
    - バージョン情報
    - ライセンス

- メイン操作エリア
  - モード切替（画像/メモ）
  - 画像選択/メモ入力
  - オーバーレイ有効/無効切替
  - モニター選択
  - 透明度調整
  - プレビュー表示
  - 詳細設定
    - 位置調整（X/Y）
    - サイズ調整
    - 回転角度調整（画像モードのみ）
    - 色設定（メモモードのみ）

### 2.2 オーバーレイウィンドウ
- フレームレスウィンドウ
- 常に最前面に表示
- ドラッグ可能
- サイズ変更可能

## 3. データフロー

### 3.1 永続化データ
- 設定ファイル（JSON形式）
  - アプリケーション設定
    - ウィンドウ位置・サイズ
    - 言語設定
    - テーマ設定
    - 最後に使用した画像パス
  - オーバーレイ設定
    - 位置
    - サイズ
    - 透明度
    - モニター選択
  - ショートカット設定
    - グローバルホットキーの組み合わせ
    - 有効/無効の状態

### 3.2 一時データ
- 現在表示中の画像
- メモテキスト
- プレビュー情報
- モニター情報

## 4. 機能要件

### 4.1 画像操作機能
- サポート形式：PNG, JPG, JPEG, BMP, GIF, WebP
  - 基本サポート：PNG, JPG, JPEG, BMP
  - 拡張サポート：GIF, WebP（Qt の対応状況に依存）
- サイズ調整
  - 範囲：1-200%
  - 基準：100%時は最大サイズの半分
  - 上限：モニターサイズを超えない
- 回転角度：0-360度
- 透明度：0-100%

### 4.2 メモ機能
- プレーンテキスト入力
- フォントサイズ調整
- 背景色・文字色カスタマイズ
- 透明度：0-100%

### 4.3 ショートカット機能
- グローバルホットキー
  - 表示/非表示の切り替え
  - デフォルト設定：Alt + Shift + O
  - 設定ファイルでのカスタマイズ可能
- バックグラウンド動作対応
- 他アプリケーションとの競合回避

### 4.4 マルチモニター対応
- 全モニター認識
- モニターごとの位置記憶
- プライマリモニター優先

## 5. 非機能要件

### 5.1 性能要件
- 起動時間：3秒以内
- メモリ使用量：100MB以下
- CPU使用率：通常時5%以下
- 画面更新：60fps

### 5.2 信頼性要件
- クラッシュ時の設定保持
- 予期せぬ終了時のリカバリー
- エラー時の適切なフィードバック

### 5.3 使用性要件
- 直感的なUI/UX
- 統一されたデザイン
- 視認性の高いUI
- リアルタイムプレビュー
