<UserControl x:Class="CC.ImageOverlay.Views.Controls.PreviewWidget"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="200" d:DesignWidth="350"
             Background="Transparent">

    <Border Background="{DynamicResource BackgroundBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="8"
            Padding="8">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Monitor Preview Area -->
            <Border x:Name="MonitorArea"
                    Grid.Row="0"
                    Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="4"
                    ClipToBounds="True">
                <Canvas x:Name="PreviewCanvas"
                        Background="Transparent"
                        MouseLeftButtonDown="PreviewCanvas_MouseLeftButtonDown"
                        MouseMove="PreviewCanvas_MouseMove"
                        MouseLeftButtonUp="PreviewCanvas_MouseLeftButtonUp">
                    
                    <!-- Overlay Rectangle -->
                    <Border x:Name="OverlayRect"
                            Background="{DynamicResource PrimaryBrush}"
                            BorderBrush="{DynamicResource PrimaryLightBrush}"
                            BorderThickness="2"
                            CornerRadius="4"
                            Opacity="0.8"
                            Cursor="SizeAll">
                        <Border.Effect>
                            <DropShadowEffect Color="#00B4D8" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                        </Border.Effect>
                    </Border>
                    
                    <!-- Resize Handle (Bottom-Right Corner) -->
                    <Border x:Name="ResizeHandle"
                            Width="12" Height="12"
                            Background="{DynamicResource PrimaryLightBrush}"
                            BorderBrush="{DynamicResource PrimaryDarkBrush}"
                            BorderThickness="1"
                            CornerRadius="2"
                            Cursor="SizeNWSE"
                            Opacity="0.9"
                            MouseLeftButtonDown="ResizeHandle_MouseLeftButtonDown"
                            MouseMove="ResizeHandle_MouseMove"
                            MouseLeftButtonUp="ResizeHandle_MouseLeftButtonUp">
                        <Border.Effect>
                            <DropShadowEffect Color="#00B4D8" BlurRadius="5" ShadowDepth="0" Opacity="0.3"/>
                        </Border.Effect>
                    </Border>
                </Canvas>
            </Border>

            <!-- Position Info -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,8,0,0">
                <TextBlock x:Name="LabelPositionXPrefix" Text="位置: X: " 
                           Foreground="{DynamicResource TextSecondaryBrush}" 
                           FontSize="11"/>
                <TextBlock x:Name="PositionXText" 
                           Text="0" 
                           Foreground="{DynamicResource TextPrimaryBrush}" 
                           FontSize="11" 
                           MinWidth="40"/>
                <TextBlock x:Name="LabelPositionYPrefix" Text="  Y: " 
                           Foreground="{DynamicResource TextSecondaryBrush}" 
                           FontSize="11"/>
                <TextBlock x:Name="PositionYText" 
                           Text="0" 
                           Foreground="{DynamicResource TextPrimaryBrush}" 
                           FontSize="11" 
                           MinWidth="40"/>
                <TextBlock x:Name="LabelSizePrefix" Text="  |  サイズ: " 
                           Foreground="{DynamicResource TextSecondaryBrush}" 
                           FontSize="11"/>
                <TextBlock x:Name="SizeText" 
                           Text="400×300" 
                           Foreground="{DynamicResource TextPrimaryBrush}" 
                           FontSize="11"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
